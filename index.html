<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  
  <!-- Added a link to Bootstrap-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <!-- Added a link to our external stylesheet-->
  <link rel="stylesheet" href="assets/css/style.css">
	<link href="https://fonts.googleapis.com/css?family=Gravitas+One|Ultra&display=swap" rel="stylesheet">
  <!-- Added link to the jQuery Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<style>
  :root {
    --black-olive: #3E3E3C;
		--dirty-white: #E8E9C9;
		--dollar-bill: #85BB65;
		--sea-green: #228D57;
  }

  html, body, * {
		background: var(--dirty-white);
		color: var(--black-olive);
    font-family: sans-serif;
  }

  .header-title {
    margin: auto;
    text-shadow: 0 2px var(--dollar-bill);
    border: 1px solid var(--black-olive);
    font-family: "Ultra", serif;
  }

  .instructions {
    margin: 1em;
    font-family: "Ultra", serif;
  }

  section {
    display: flex;
    border: .5px solid var(--black-olive);
    box-shadow: 0 2px 2px var(--black-olive);
    margin: 1em;
    padding: .5em;
  }

  .pres-img {
    width: 100px;
    height: 100px;
    padding-right: 1em;
  }

  .pres-details > p {
    padding: 0;
    margin: 0;
  }

  .pres-name {
    font-size: 1.5em;
    font-family: "Ultra", serif;
    border-bottom: 1px solid var(--black-olive);
  }

  .hero > .pres-details > .pres-name:before, .hero > .pres-details > .pres-name:after {
			content: "âœª";
		}

  .active-enemy > .pres-details > .pres-name {
    color: red;
  }

  .attack-button {
    width: 50%;
    margin: 1em;
  }
  
</style>
</head>

<body>

<header>
  <h1 class="header-title">Dollar Bill Showdown</h1>
</header>

<main>

<!-- Instructions and feedback -->
  <p class="instructions"></p>
  <div class="interface">
    <button class="attack-button">Attack!</button>
		<button class="reset-button">Try Again</button>
  </div>
  <div class="battleground">

<!-- George -->
    <section class="character george-sec">
      <img class="pres-img" src="https://upload.wikimedia.org/wikipedia/commons/2/23/US_one_dollar_bill%2C_obverse%2C_series_2009.jpg" alt="George Washington">
      <div class="pres-details george-deets">
        <p class="pres-name">George</p>
        <p class="pres-health">Health Points: <span class="hp"></span></p>
        <p class="a">Attack Points: <span class="ap"></span></p>
        <p class="c">Counter Attack Points: <span class="cp">1</span></p>
        <p class="b">Bonus Points: <span class="bp">1</span></p>
      </div>
    </section>

<!-- abe -->
    <section class="character abe-sec">
      <img class="pres-img" src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f9/US_%245_Series_2006_obverse.jpg/1920px-US_%245_Series_2006_obverse.jpg" alt="Abraham Lincoln">
      <div class="pres-details abe-deets">
        <p class="pres-name">Abe</p>
        <p class="pres-health">Health Points: <span class="hp"></span></p>
        <p class="a">Attack Points: <span class="ap"></span></p>
        <p class="c">Counter Attack Points: <span class="cp">1</span></p>
        <p class="b">Bonus Points: <span class="bp">1</span></p>
      </div>
    </section>

<!-- alex -->
    <section class="character alex-sec">
      <img class="pres-img" src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/49/US10dollarbill-Series_2004A.jpg/1920px-US10dollarbill-Series_2004A.jpg" alt="Alexander Hamilton">
      <div class="pres-details alex-deets">
        <p class="pres-name">Alex</p>
        <p class="pres-health">Health Points: <span class="hp"></span></p>
        <p class="a">Attack Points: <span class="ap"></span></p>
        <p class="c">Counter Attack Points: <span class="cp">1</span></p>
        <p class="b">Bonus Points: <span class="bp">1</span></p>
      </div>
    </section>

<!-- andy -->
    <section class="character andy-sec">
      <img class="pres-img" src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/79/US_%2420_Series_2006_Obverse.jpg/1920px-US_%2420_Series_2006_Obverse.jpg" alt="Andrew Jackson">
      <div class="pres-details andy-deets">
        <p class="pres-name">Andy</p>
        <p class="pres-health">Health Points: <span class="hp"></span></p>
        <p class="a">Attack Points: <span class="ap"></span></p>
        <p class="c">Counter Attack Points: <span class="cp">1</span></p>
        <p class="b">Bonus Points: <span class="bp">1</span></p>
      </div>
    </section>
  </div>
  
</main>

<footer>
</footer>

<script>

$(document).ready(function(){

  var isHeroSelected = false;
  var isEnemySelected = false;
  var enemyQueue = [];

  // $(".instructions").text("Choose a hero.");

  function newGame() {
    $(".george-sec .hp").text(10);
    $(".george-sec .ap").text(2);
    $(".abe-sec .hp").text(10);
		$(".abe-sec .ap").text(1);
		$(".alex-sec .hp").text(10);
		$(".alex-sec .ap").text(1);
		$(".andy-sec .hp").text(10);
		$(".andy-sec .ap").text(1);
    isHeroSelected = false;
		isEnemySelected = false;
    enemyQueue = [];
		$("section").removeClass("hero enemy active-enemy defeated");

		$(".reset-button").hide();
        
    $(".attack-button").hide();

    $(".instructions").text("Choose a hero.");

    $(".character").on("click",function() {
      if (!isHeroSelected) {
        $(this).addClass("hero");
	    	isHeroSelected = true;
	    	enemyQueue = $(this).siblings();
	    	enemyQueue.addClass("enemy");
	    	newBattle();
	  	}
    });
  }

  function newBattle() {
		$(".instructions").text("Choose an enemy to attack.");

		$(".enemy").on("click",function() {
  	  if (!isEnemySelected) {
  	    $(this).addClass("active-enemy");
  	    isEnemySelected = true;
  	    newRound();
  	  }
  	});
  }

  function newRound() {
    $(".attack-button").show();
    $(".instructions").text("Use the button to attack your enemy!");

// Battle math: health points minus attack points
    $(".attack-button").on("click", function() {
      var newEnemyHP = parseInt($(".active-enemy .hp").text()) - parseInt($(".hero .ap").text());
      var newHeroHP = parseInt($(".hero .hp").text()) - parseInt($(".active-enemy .cp").text());

// Condition if enemy runs out of health points in the battle
      if (newEnemyHP < 1) {
				$(".active-enemy .hp").text(0);
// Upgrade hero attack strength
				var newHeroAP = parseInt($(".hero .ap").text()) + parseInt($(".active-enemy .bp").text());
				$(".hero .ap").text(newHeroAP);

// Convert enemy to defeated, need a css profile to visually show eligibility
        isEnemySelected = false;
				$(".active-enemy").removeClass("active-enemy enemy").addClass("defeated");
        newBattle();
      }
			

// Condition if hero runs out of health points in the battle
			if (newHeroHP < 1) {
				$(".hero .hp").text(0);
				$(".attack-button").hide();
        $(".instructions").text("Game over! Click the button to try again.");
				$(".reset-button").show().on("click", function(){
					newGame();
				});
      }

// If all HP totals remain above 0, newRound
      else { $(".hero .hp").text(newHeroHP);
				$(".active-enemy .hp").text(newEnemyHP);
			}
    });
  }

  newGame();

});

</script>
</body>
</html>
